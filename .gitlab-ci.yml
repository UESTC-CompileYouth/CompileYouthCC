# select compiler test docker image 
# default:
#  image: docker.art.haizhi.com/public/cicd-rust:nightly-2022-04-12-0.0.6
#  tags:


stages:
  - check
  - test


# format and compiler chcek
pre_check:
  stage: check
  script:
    - rustc --version
    - cargo fmt --all --check
    - cargo check --release
    - cargo check --tests --release
  interruptible: true


# unit test for each mod
unit_test:
  stage: test
  script:
    - cargo test --release
    
# test SysYCC correctness 
functional_test:
  stage: test
  script:
    - cargo build --release
    
# test SysYCC optimization performance 
performance_test:
  stage: test
  script:
    - cargo build --release
